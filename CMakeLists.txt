cmake_minimum_required(VERSION 3.24)
project(FITWebViewBridge LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

option(BUILD_BINDINGS "Build Python bindings" ON)

if(CMAKE_SYSTEM_NAME STREQUAL "Darwin")
  add_subdirectory(src/macos)
  if(BUILD_BINDINGS)
    add_subdirectory(bindings/pyside6/macos)
  endif()
elseif(WIN32)
  add_subdirectory(src/win)
  if(BUILD_BINDINGS)
    add_subdirectory(bindings/pyside6/win)
  endif()
elseif(UNIX) # Linux (non macOS)
  add_subdirectory(src/linux)
  if(BUILD_BINDINGS)
    add_subdirectory(bindings/pyside6/linux)
  endif()
else()
  message(FATAL_ERROR "Unsupported platform: ${CMAKE_SYSTEM_NAME}")
endif()
